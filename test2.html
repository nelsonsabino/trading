<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Teste Final: Firebase vs Lightbox</title>
    <!-- Link para O MESMO style.css que a sua app usa -->
    <link rel="stylesheet" href="style.css">
    <style>
        body { padding: 2rem; }
        .test-image { width: 200px; cursor: pointer; border: 2px solid #dc3545; }
    </style>
</head>
<body>

    <h1>Teste do Ponto de Rutura</h1>
    <p>Clique na imagem vermelha. Se o lightbox não abrir, o problema é a inicialização do Firebase.</p>

    <img src="https://i.imgur.com/exemplo2.png" alt="Imagem de Teste" class="test-image">

    <!-- ESTRUTURA DO LIGHTBOX (copiada do seu index.html) -->
    <div id="image-lightbox" class="modal-overlay">
        <span id="close-lightbox-btn">×</span>
        <img id="lightbox-image" src="" alt="Gráfico em detalhe">
    </div>

    <!-- SCRIPT DE TESTE COM A IMPORTAÇÃO DO FIREBASE -->
    <script type="module">
        // ESTA É A ÚNICA LINHA NOVA IMPORTANTE
        import { listenToTrades } from './js/firebase-service.js';

        document.addEventListener('DOMContentLoaded', () => {
            console.log("Página de teste 2 CARREGADA, com import do Firebase.");

            // A mesma lógica simples que sabemos que funciona
            const testImage = document.querySelector('.test-image');
            const lightboxContainer = document.getElementById('image-lightbox');
            const lightboxImage = document.getElementById('lightbox-image');
            const closeBtn = document.getElementById('close-lightbox-btn');
            
            function openLightbox(url) {
                lightboxImage.src = url;
                lightboxContainer.style.display = 'flex';
            }

            function closeLightbox() {
                lightboxContainer.style.display = 'none';
            }

            testImage.addEventListener('click', () => openLightbox(testImage.src));
            closeBtn.addEventListener('click', closeLightbox);
            
            // Apenas para confirmar que a importação funcionou
            console.log("A função listenToTrades foi importada:", listenToTrades);
        });
    </script>

</body>
</html>
