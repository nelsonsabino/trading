/* css/tables.css */

/* --- TABELAS GERAIS --- */
.table-wrapper { 
    overflow-x: auto;
    width: 100%; 
    -webkit-overflow-scrolling: touch;
}

/* Aplicar o estilo base a TODAS as tabelas */
.market-table, .alarms-table, #trades-table, 
#strategy-stats table, #reason-stats table, .trades-history-table { 
    width: 100%; 
    border-collapse: collapse; 
    margin-top: 1.5rem; 
    background: var(--surface-primary); 
    border-radius: 8px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.08); 
    overflow: hidden;
    font-size: 0.95em; 
    border: 1px solid var(--border-primary);
}

/* Aplicar o estilo de cabeçalho a TODAS as tabelas */
.market-table thead tr, .alarms-table thead tr, #trades-table thead tr,
#strategy-stats thead tr, #reason-stats thead tr, .trades-history-table thead tr { 
    background-color: var(--bg-primary); 
    border-bottom: 2px solid var(--border-primary); 
}

/* Aplicar o estilo de célula de cabeçalho a TODAS as tabelas */
.market-table th, .alarms-table th, #trades-table th,
#strategy-stats th, #reason-stats th, .trades-history-table th { 
    padding: 1rem; 
    text-align: left; 
    font-weight: 600; 
    color: var(--text-headings); 
}

/* Aplicar o estilo de célula de dados a TODAS as tabelas */
.market-table td, .alarms-table td, #trades-table td,
#strategy-stats td, #reason-stats td, .trades-history-table td { 
    padding: 1rem; 
    border-bottom: 1px solid var(--border-secondary); 
    vertical-align: middle; 
    display: table-cell;
    text-align: left;
}

/* Compactar células da tabela de histórico */
.trades-history-table td {
    padding: 0.8rem 1rem;
    vertical-align: top;
    word-wrap: break-word;
    white-space: normal;
}

/* Remove a borda inferior da última linha de TODAS as tabelas */
.market-table tbody tr:last-child td, 
.alarms-table tbody tr:last-child td, 
#trades-table tbody tr:last-child td,
#strategy-stats tbody tr:last-child td,
#reason-stats tbody tr:last-child td,
.trades-history-table tbody tr:last-child td { 
    border-bottom: none; 
}

/* Cores para o P&L (Lucro e Prejuízo) usando variáveis de feedback */
.positive-pnl { 
    color: var(--feedback-positive); 
    font-weight: bold; 
}
.negative-pnl { 
    color: var(--feedback-negative); 
    font-weight: bold; 
}

/* Alinhamento dos elementos na coluna de ativo (para sinais) */
.asset-name { 
    display: flex; 
    align-items: center; 
    gap: 8px; 
}

/* --- SINAIS E BADGES (RSI, STOCH) --- */
.rsi-signal, .stoch-signal {
    display: inline-block;
    width: 22px; 
    height: 22px;
    line-height: 22px; 
    font-size: 0.7em;
    font-weight: bold;
    color: var(--surface-primary);
    background-color: var(--accent-blue); 
    border-radius: 50%; 
    text-align: center;
    cursor: help; 
    position: relative; 
    flex-shrink: 0; 
    margin-left: 5px; 
}
.stoch-signal {
    background-color: #6f42c1; /* Roxo para diferenciar */
}

/* Tooltip básico para os sinais */
.rsi-signal::after, .stoch-signal::after {
    content: attr(data-tooltip); 
    position: absolute;
    bottom: 125%; 
    left: 50%;
    transform: translateX(-50%); 
    background-color: var(--text-primary); 
    color: var(--surface-primary); 
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 13px; 
    white-space: nowrap; 
    opacity: 0; 
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s; 
    z-index: 10; 
}
.rsi-signal:hover::after, .stoch-signal:hover::after { 
    opacity: 1; 
    visibility: visible; 
}

/* --- Para ocultar a coluna inteira do sparkline --- */
.market-table.hide-sparkline-column th:nth-child(4),
.market-table.hide-sparkline-column td:nth-child(4) {
    display: none;
}

/* Estilo para o link/botão de screenshot */
.screenshot-link-btn {
    display: inline-block;
    padding: 4px 8px;
    font-size: 0.8em;
    background-color: var(--accent-blue);
    color: var(--surface-primary);
    border-radius: 4px;
    text-decoration: none;
    transition: background-color 0.2s;
}

.screenshot-link-btn:hover {
    filter: brightness(0.9);
}

/* Estilo para a linha da tabela de watchlist quando um alarme dispara */
.alarms-table tr.alarm-triggered {
    /* Usamos box-shadow para criar um "glow" sem afetar o layout */
    box-shadow: inset 0 0 0 2px var(--feedback-alert-glow);
}


/* Estilo para o link do último alarme criado na Watchlist de Alarmes */
.alarms-table .alarm-details-link {
    color: #198754; /* Verde escuro (cor de sucesso do Bootstrap) */
    text-decoration: underline;
    font-weight: 500;
    transition: color 0.2s ease;
}

.alarms-table .alarm-details-link:hover {
    color: #146c43; /* Verde um pouco mais escuro no hover */
}

/* Nova cor para o sinal STC quando há cruzamento confirmado */
.stoch-signal.crossover-confirmed {
    background-color: #fd7e14; /* Laranja Bootstrap */
}

/* --- INÍCIO DA CORREÇÃO --- */
/* Asterisco para o sinal de cruzamento confirmado, usando ::before para evitar conflito com o tooltip (::after) */
.stoch-signal.crossover-confirmed::before {
    content: '*';
    position: absolute;
    top: -5px;      /* Posição vertical */
    right: -5px;     /* Posição horizontal */
    font-size: 1.2em;
    font-weight: bold;
    color: #fd7e14; /* Mesma cor do círculo */
    /* Garante que não interfere com o layout */
    z-index: 5; 
}
/* --- FIM DA CORREÇÃO --- */
